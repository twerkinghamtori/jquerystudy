<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>fetch 함수 : json 결과 처리</title>
<script type="text/javascript">
	function load(url) {
		fetch(url)
		//r.text() : 서버의 응답 메세지를 문자열 형태로 받음
		//r.json() : 서버의 응답 메세지를 json 객체로 받음 (반드시 json 형태여야 함) => ajax3.html 에서는 JSON.parse으로 형태 바꿨었음
		.then((r)=>r.json())
		.then((data)=>{
			//data : 객체 형태. []이므로 배열 객체 {}이면 json 객체
			let area = document.querySelector("#area")
			for(s of data) {
				area.innerHTML += "<p>" + s.author.book + ":" + s.author.pubDate + "</p>"
			}
		})
	}
	function load2(url) {
		fetch(url)		
		.then((r)=>r.text())
		.then((t)=>{
			let data = JSON.parse(t)
			let area = document.querySelector("#area")
			for(s of data) {
				area.innerHTML += "<p>" + s.author.book + ":" + s.author.pubDate + "</p>"
			}
		})
	}
</script>
</head>
<body>
	<input type="button" value="json읽기" onclick="load2('../20230426/test.json')">
	<div id="area"></div>
</body>
</html>